# 응답지연 값

-   메모리는 빠르지만 디스크는 아직도 느리다.
-   디스크 탐색(seek)은 가능한 한 피하라.
-   단순한 압축 알고리즘은 빠르다.
-   데이터를 인터넷으로 전송하기 전에 가능하면 압축하라.
-   데이터 센터는 보통 여러 지역(region)에 분산되어 있고, 센터들 간에 데이 터를 주고받는 데는 시간이 걸린다.

## 가용성에 관계된 수치들

고가용성(high availability)은 시스템이 오랜 시간 동안 지속적으로 중단 없이 운영될 수 있는 능력을 지칭하는 용어다. 고가용성을 표현하는 값은 퍼센트 (percent)로 표현하는데, 100%는 시스템이 단 한 번도 중단된 적이 없었음을 의미한다. 대부분의 서비스는 99%에서 100% 사이의 값을 갖는다.

SLA(Service Level Agreement)는 서비스 사업자(service provider)/\]- 보편적 으로 사용하는 용어로, 서비스 사업자와 고객 사이에 맺어진 합의를 의미한다. 이 합의에는 서비스 사업자가 제공하는 서비스의 가용시간(uptime)이 공식적 으로 기술되어 있다.

(아마존, 구글, 마이크로소프트 같은 사업자는 99% 이상의 SLA 제공)

![Image](https://github.com/user-attachments/assets/4d767fe5-917a-417d-984f-55b7b2fd5b1b)

### 연습 : 예제로 알아보는 트위터 QPS와 저장소 요구량 추정(가정)

**가정**

-   월간 능동 사용자(monthly active user)는 3억(300million) 명이다.
-   50%의 사용자가 트위터를 매일 사용한다.
-   평균적으로 각 사용자는 매일 2건의 트윗을 올린다
-   미디어를 포함하는 트윗은10%정도다.
-   데이터는5년간 보관된다.

**추정**

QPS(Query Per Second) 추정치

-   일간 능동 사용자(Daily Active User, DAU) = 3억 x 50%=1.5억(150million)
-   QPS = 1.5억 x 2 트윗/24시간/3600초 = 약 3500
-   최대 QPS(Peek QPS) = 2xQPS = 약7000

미디어 저장을 위한 저장소 요구량

-   평균 트윗크기
    -    tweet\_id 에 64바이트
    -   텍스트에 140바이트
    -   미디어에 1MB
-   미디어 저장소요구량: 1.5억 x 2 x 10% x QPS = 3076/일
-   5년간 미디어를 보관하기 위한 저장소 요구량: 30TB x 365 x 5 = 약 55PB

### TIPS

-   근사치를 활용한 계산(rounding and approximation)： 면접장에서 복잡한 계산을 하는 것은 어렵다.예를 들어, “99987/9.1”의 계산 결과는 무엇인가? 라는 질문은 계산 결과의 정확함을 평가하는 것이 목적이 아니다. 그러니 적절한 근사치를 활용하여 시간을 절약하자. 방금 살펴본 수식은 “100,000/10”로 간소화할 수 있다.
-   나중에 살펴볼 수 있도록 가정(assumption)들은 적기.
-   단위(unit)를 붙이라. 5라고만 적으면 5KB인지 5MB인지 알 수가 없다. 단위를 붙이는 습관을 들여 두면 모호함을 방지할 수 있다.
-   많이 출제되는 개략적 규모 추정 문제는 QPS, 최대 QPS, 저장소 요구량, 캐시 요구량, 서버 수 등을 추정하는 것이다.
